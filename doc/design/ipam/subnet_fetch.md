# 地址段获取
## 概要
给定一个网络，通过获取网络中的所有子网，以及子网中的
网络接口物理地址和ip地址的对应关系，通过跟dhcp中的租赁
信息对比来获取所有网络的地址规划和使用情况。

## 动机和目标
- 提供统一放方案支持IPv4和IPv6网络
- 所有的网络发现，实现完全的自动化，并且能实时更新

## 网段信息的获取
所有网络的划分都需要使用网络设备来实现，通用的网络设备
包括交换机和路由器，通过获取网络设备所有接口的IP地址，以
及IP地址和硬件地址的对应关系，来获取所有子网的信息，这
些信息通过snmpj协议来实现。

对应于IPv4，OID是
- ipAddrTable 
- ipNetToMediaTable 
对于IPv6，OID是
- ipv6AddrTable
- ipv6NetToMediaTable

获取接口地址会过滤掉loopback的地址，以及IPv6的linklocal的
地址。

## snmp协议
目前使用的v2版本，snmp的数据模型类似于DNS，是key-value结构
key就是OID，value部分支持多种类型。当访问某个OID的时候，应
答的信息会在返回一个或者多个key，value对，这时的key是以访
问的OID为前缀同时会在后面附加其他信息。

## 未来工作
虽然使用的OID是标准的，所有厂商都支持的，但是具体的返
回值不同的厂商会有差别，当前的实现主要基于华为的设备，
后续需要支持更多厂商的设备
同时snmp协议的v3版本也在被越来越多的设备支持，v3版本提
供了更多的安全方面的功能，后续需要支持
